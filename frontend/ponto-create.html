<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OtoLugar - Encontre o seu lugar</title>
    <link rel="stylesheet" href="resources/css/main.css">
    <link rel="stylesheet" href="resources/css/responsive-menu.css">
    <link rel="stylesheet" href="resources/css/create-iti.css">
    <link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
    
    <header>
        <nav>
            <div class="logo">
                <a href="index.html">
                    <img class="isotipo" src="resources/img-main/logo.svg" alt="">
                </a>
            </div>

            <div class="navmenu">
                <button id="btn-mobile"><i class='bx bx-menu active' ></i><i class='bx bx-x'></i></button>
                <ul class="list">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="pesquisa.html">Pesquisar</a></li>
                    <li><a href="perfil.html">Meu perfil</a></li>
                    <li><a href="contato.html">Contato</a></li>
                    <li><a href="main-cadastro-login.html" class="mobileSign">Cadastro/Login</a></li>
                </ul>
            </div>

            <div class="sign">
                <a href="main-cadastro-login.html">Cadastro/Login</a>
            </div>
        </nav>
    </header>

    <script src="resources/js/menu.js"></script>
    
        <section class="secaoiti">
            <div class="iti-emp">
                <h1 class= iti-create>Crie um Ponto</h1>
                <box class="box-iti" >
                    <div class="itinerario"> 
                    </div>
                    <div class="info-iti">
                        <div class="info-iti-create">
                            <form class="form" id="formulario" action="." method="get">
                                <div class="campo1">
                                      <label class="nameiti1"><strong class="nameiti2">Nome</strong></label>
                                    <input rows="6" type="text" class="nameiti3" id="nome" name="nameiti1" placeholder="Insira o nome da sua empresa">
                                    <br>
                                    <label class="desc1"><strong class="desc2">Descrição</strong></label>
                                    <textarea rows="6" type="text"  id="descricao" class="desc3" name="desc1" placeholder="Insira informações aqui"></textarea>
                                    <br>
                                    <label class="ende1"><strong class="ende2">Endereço</strong></label>
                                    <input rows="6" type="text" id="endereco" class="ende3" name="ende1" placeholder="Insira o local">
                                    <br>
                                    <label class="ende1"><strong class="ende2">Imagem</strong></label>
                                    <input rows="6" type="text" id="imagem" class="ende3" name="ende1" placeholder="Insira a url da imagem">
                                    <br>
                                    <label class="ende1"><strong class="ende2">Descrição da imagem</strong></label>
                                    <textarea rows="6" type="text"  class="ende3" id="altImagem" name="ende1" placeholder="Insira uma descrição da imagem para ajudar na acessibilidade"></textarea>
                                    <br>
                                    <label class="value1"><strong class="value2">Valor</strong></label>
                                    <input rows="6" type="number" class="value3" id="valor" name="value1" placeholder="Insira o quanto custa">
                                    <br>
                                </div>
                                <button class= button-dados onclick="getFormInfos(), window.location.href = '/'"type=text>Criar</button>
            <!-- (Ou para o botão) input type="submit" class=button-dados value="Alterar dados" /> -->
                            </form>
                        </div>
                    </form>
                    </div>
                </box>
            </div>
        </section>
        <footer>
            <p>Todos os direitos de imagem são de seus respectivos donos/criadores. Todas as imagens utilizadas são para fins acadêmicos. <br> Para mais informações ou reclamações entre em contato conosco.</p>
        </footer>
        <script src="resources/js/menu.js"></script>

        <!-- Retira o evento padrão do formulario-->
        <script>
        function getFormInfos() {

  let nome = document.getElementById('nome').value;
  let descricao = document.getElementById('descricao').value;
  let imagem = document.getElementById('imagem').value;
  let altImagem = document.getElementById('altImagem').value;
  let mapa = document.getElementById('endereco').value;
  let valor = document.getElementById('valor').value;
  
  let ponto = {
    nome: nome,
    descricao: descricao,
    imagem: imagem,
    altImagem: altImagem,
    mapa: mapa,
    valor: valor
  }

  createPonto(ponto);
}

async function createPonto(ponto) {
  const url = '/create-pontos';

  await fetch(url, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(ponto),
          })
            .then((response) => response.json())
            .then((data) => {
              console.log("Success:", data);
            })
            .catch((error) => {
              console.error("Error:", error);
            });
        
        }
          
        document.getElementById('formulario').addEventListener(
         'submit', stopDefAction, false
        );

        function stopDefAction(evt) {
            evt.preventDefault();
        }
        </script>
    </body>
    </html>